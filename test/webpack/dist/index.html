<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>webpack</title>
<script defer src="index.js"></script></head>

<body>
    UZIZIIII
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            console.log('@@@@', window._xcUpdate);
            // 注入客户端当前的版本号
            window._xcUpdate.onUpdate((info) => {
                let content = info.isLogout ? '登录后才能更新2211' : '可以更新2112';
                if (confirm(content)) {
                    // 存储最新的版本号
                    console.log('确定更新', info);
                    localStorage.setItem("version", info.newHash);
                    location.reload()
                } else {
                    // 取消了更新
                    window._xcUpdate.updateLater()
                }
            }, localStorage.getItem('version'))
        });
    </script>
</body>

</html>